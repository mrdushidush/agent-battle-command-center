@import 'tailwindcss';

@theme {
  --color-command-bg: #0a0e14;
  --color-command-panel: #141a22;
  --color-command-border: #1e2836;
  --color-command-accent: #2d3b4f;

  --color-hud-green: #00ff88;
  --color-hud-blue: #00aaff;
  --color-hud-amber: #ffaa00;
  --color-hud-red: #ff4444;
  --color-hud-purple: #aa55ff;

  --color-agent-coder: #3b82f6;
  --color-agent-qa: #10b981;

  --color-status-pending: #6b7280;
  --color-status-assigned: #8b5cf6;
  --color-status-active: #3b82f6;
  --color-status-stuck: #f59e0b;
  --color-status-completed: #10b981;
  --color-status-failed: #ef4444;

  --font-mono: JetBrains Mono, Fira Code, monospace;
  --font-display: Orbitron, sans-serif;

  --animate-pulse-slow: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-scan: scan 2s ease-in-out infinite;
  --animate-glow: glow 2s ease-in-out infinite alternate;
  --animate-radar-sweep: radar-rotate 4s linear infinite;
  --animate-slide-in: slide-in 0.3s ease-out;
  --animate-slide-up: slide-up 0.3s ease-out;
  --animate-fade-in: fade-in 0.3s ease-out;
  --animate-scale-pulse: scale-pulse 0.4s ease-out;
  --animate-shake: shake 0.5s ease-in-out;
  --animate-border-flash-green: border-flash-green 0.5s ease-out;
  --animate-border-flash-red: border-flash-red 0.5s ease-out;
  --animate-warning-blink: warning-blink 1s linear infinite;
  --animate-glow-pulse-blue: glow-pulse-blue 2s ease-in-out infinite;
  --animate-glow-pulse-amber: glow-pulse-amber 1.5s ease-in-out infinite;

  @keyframes scan {
    0%,
    100% {
      opacity: 0.5;
    }
    50% {
      opacity: 1;
    }
  }
  @keyframes glow {
    0% {
      box-shadow: 0 0 5px currentColor;
    }
    100% {
      box-shadow:
        0 0 20px currentColor,
        0 0 30px currentColor;
    }
  }
  @keyframes radar-rotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
  @keyframes slide-in {
    0% {
      opacity: 0;
      transform: translateX(-10px);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }
  @keyframes slide-up {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
  @keyframes scale-pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes shake {
    0%,
    100% {
      transform: translateX(0);
    }
    10%,
    30%,
    50%,
    70%,
    90% {
      transform: translateX(-2px);
    }
    20%,
    40%,
    60%,
    80% {
      transform: translateX(2px);
    }
  }
  @keyframes border-flash-green {
    0% {
      border-color: rgba(16, 185, 129, 0.5);
    }
    50% {
      border-color: rgba(16, 185, 129, 1);
    }
    100% {
      border-color: rgba(16, 185, 129, 0.5);
    }
  }
  @keyframes border-flash-red {
    0% {
      border-color: rgba(239, 68, 68, 0.5);
    }
    50% {
      border-color: rgba(239, 68, 68, 1);
    }
    100% {
      border-color: rgba(239, 68, 68, 0.5);
    }
  }
  @keyframes warning-blink {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
  @keyframes glow-pulse-blue {
    0%,
    100% {
      box-shadow: 0 0 5px rgba(59, 130, 246, 0.3);
    }
    50% {
      box-shadow:
        0 0 15px rgba(59, 130, 246, 0.6),
        0 0 25px rgba(59, 130, 246, 0.3);
    }
  }
  @keyframes glow-pulse-amber {
    0%,
    100% {
      box-shadow: 0 0 5px rgba(245, 158, 11, 0.3);
    }
    50% {
      box-shadow:
        0 0 15px rgba(245, 158, 11, 0.6),
        0 0 25px rgba(245, 158, 11, 0.3);
    }
  }
}

/* BattleClaw theme overrides */
[data-theme="battleclaw"] {
  --color-command-bg: #0a0f1c;
  --color-command-panel: #0f172a;
  --color-command-border: #1e2937;
  --color-command-accent: #2d3b4f;
  --color-hud-green: #14f5c7;
  --color-hud-blue: #06b6d4;
  --color-hud-amber: #facc15;
  --color-agent-coder: #14f5c7;
  --color-agent-qa: #facc15;
  --font-mono: 'Roboto Mono', 'JetBrains Mono', monospace;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility panel {
  @apply bg-command-panel border border-command-border rounded-lg;
}
@utility panel-header {
  @apply px-4 py-2 border-b border-command-border font-display text-sm uppercase tracking-wider text-gray-400;
}
@utility panel-content {
  @apply p-4;
}
@utility hud-border {
  /* HUD elements */
  @apply border border-hud-green/30;
  box-shadow: 0 0 10px rgba(0, 255, 136, 0.1);
}
@utility hud-text {
  @apply text-hud-green font-display tracking-wider;
}
@utility status-dot {
  /* Status indicators */
  @apply w-2 h-2 rounded-full;
}
@utility status-dot-idle {
  @apply bg-status-completed animate-pulse-slow;
}
@utility status-dot-busy {
  @apply bg-status-active animate-scan;
}
@utility status-dot-stuck {
  @apply bg-status-stuck animate-pulse;
}
@utility status-dot-offline {
  @apply bg-status-pending;
}
@utility resource-bar {
  /* Resource bars */
  @apply h-4 bg-command-accent rounded-sm overflow-hidden;
}
@utility resource-bar-fill {
  @apply h-full transition-all duration-500 ease-out;
}
@utility task-card {
  /* Task cards - Compact for fitting more */
  @apply panel p-2 hover:border-hud-blue/50 transition-colors cursor-pointer;

  &.active {
    @apply border-hud-blue/70;
    box-shadow: 0 0 15px rgba(0, 170, 255, 0.2);
  }

  &.pending {
    @apply border-status-pending/30;
  }

  &.in-progress {
    @apply border-status-active/50;
  }

  &.stuck {
    @apply border-status-stuck/50;
  }

  &.completed {
    @apply border-status-completed/50;
  }
}
@utility active {
  &.task-card {
    @apply border-hud-blue/70;
    box-shadow: 0 0 15px rgba(0, 170, 255, 0.2);
  }

  &.mode-toggle-btn {
    @apply bg-hud-green/20 text-hud-green;
  }
}
@utility pending {
  &.task-card {
    @apply border-status-pending/30;
  }
}
@utility in-progress {
  &.task-card {
    @apply border-status-active/50;
  }
}
@utility stuck {
  &.task-card {
    @apply border-status-stuck/50;
  }
}
@utility completed {
  &.task-card {
    @apply border-status-completed/50;
  }
}
@utility agent-card {
  /* Agent cards */
  @apply panel p-3 transition-all duration-300;

  &.coder {
    @apply border-agent-coder/30 hover:border-agent-coder/60;
  }

  &.qa {
    @apply border-agent-qa/30 hover:border-agent-qa/60;
  }
}
@utility coder {
  &.agent-card {
    @apply border-agent-coder/30 hover:border-agent-coder/60;
  }
}
@utility qa {
  &.agent-card {
    @apply border-agent-qa/30 hover:border-agent-qa/60;
  }
}
@utility btn {
  /* Buttons */
  @apply px-4 py-2 rounded-sm font-display text-sm uppercase tracking-wider transition-all duration-200;
}
@utility btn-primary {
  @apply btn bg-hud-blue/20 text-hud-blue border border-hud-blue/50 hover:bg-hud-blue/30;
}
@utility btn-success {
  @apply btn bg-hud-green/20 text-hud-green border border-hud-green/50 hover:bg-hud-green/30;
}
@utility btn-warning {
  @apply btn bg-hud-amber/20 text-hud-amber border border-hud-amber/50 hover:bg-hud-amber/30;
}
@utility btn-danger {
  @apply btn bg-hud-red/20 text-hud-red border border-hud-red/50 hover:bg-hud-red/30;
}
@utility mode-toggle {
  /* Mode toggle */
  @apply flex rounded-lg overflow-hidden border border-command-border;
}
@utility mode-toggle-btn {
  @apply px-4 py-2 font-display text-xs uppercase tracking-wider transition-all duration-200;

  &.active {
    @apply bg-hud-green/20 text-hud-green;
  }

  &:not(.active) {
    @apply text-gray-500 hover:text-gray-300;
  }
}

/* Base styles */
:root {
  --hud-green: #00ff88;
  --hud-blue: #00aaff;
  --hud-amber: #ffaa00;
  --hud-red: #ff4444;
}

@layer base {
  body {
    @apply bg-command-bg text-gray-100 font-mono;
    overflow: hidden;
  }

  /* Screen reader only utility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Focus visible styles for keyboard navigation */
  *:focus-visible {
    outline: 2px solid var(--hud-blue);
    outline-offset: 2px;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-command-bg;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-command-accent rounded-sm;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-command-border;
  }
}

/* Minimap styling - Radar display */
.minimap {
  @apply relative overflow-hidden;
  background:
    /* Circular radar screen gradient */
    radial-gradient(circle at center, rgba(0, 20, 10, 0.9) 0%, rgba(0, 40, 20, 0.7) 50%, rgba(0, 60, 30, 0.5) 100%),
    /* Vignette effect */
    radial-gradient(circle at center, transparent 40%, rgba(0, 0, 0, 0.6) 100%);
  border: 2px solid rgba(0, 255, 136, 0.3);
  border-radius: 4px;
}

.minimap-grid {
  background-image:
    /* Fine grid lines */
    linear-gradient(rgba(0, 255, 136, 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 255, 136, 0.15) 1px, transparent 1px),
    /* Crosshair lines */
    linear-gradient(to bottom, transparent 49.5%, rgba(0, 255, 136, 0.3) 49.5%, rgba(0, 255, 136, 0.3) 50.5%, transparent 50.5%),
    linear-gradient(to right, transparent 49.5%, rgba(0, 255, 136, 0.3) 49.5%, rgba(0, 255, 136, 0.3) 50.5%, transparent 50.5%);
  background-size: 20px 20px, 20px 20px, 100% 100%, 100% 100%;
}

/* Scan line effect */
.scanline {
  position: relative;
  overflow: hidden;
}

.scanline::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--hud-green), transparent);
  animation: scanline 3s linear infinite;
}

@keyframes scanline {
  0% { transform: translateY(0); }
  100% { transform: translateY(100vh); }
}

/* ========================================
   Military Command Center Theme
   ======================================== */

/* Command center backdrop with subtle grid */
.command-bg-enhanced {
  background:
    /* Diagonal tactical stripes */
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 50px,
      rgba(0, 255, 136, 0.01) 50px,
      rgba(0, 255, 136, 0.01) 51px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 50px,
      rgba(0, 170, 255, 0.01) 50px,
      rgba(0, 170, 255, 0.01) 51px
    ),
    /* Radial highlights */
    radial-gradient(ellipse at 50% 0%, rgba(0, 255, 136, 0.03) 0%, transparent 60%),
    radial-gradient(ellipse at 100% 100%, rgba(0, 170, 255, 0.02) 0%, transparent 40%),
    /* Base gradient */
    linear-gradient(180deg, #0a0e14 0%, #0d1219 100%);
}

/* Subtle tactical grid overlay */
.tactical-grid {
  background-image:
    linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
  background-size: 40px 40px;
}

/* Radar sweep effect for minimap */
.radar-sweep {
  position: absolute;
  inset: 0;
  background: conic-gradient(from 0deg at 50% 50%, transparent 0deg, rgba(0, 255, 136, 0.15) 30deg, transparent 60deg);
  animation: radar-rotate 4s linear infinite;
  pointer-events: none;
}

@keyframes radar-rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Radar rings */
.radar-rings {
  position: absolute;
  inset: 10%;
  border: 1px solid rgba(0, 255, 136, 0.1);
  border-radius: 50%;
  pointer-events: none;
}

.radar-rings::before,
.radar-rings::after {
  content: '';
  position: absolute;
  border: 1px solid rgba(0, 255, 136, 0.1);
  border-radius: 50%;
}

.radar-rings::before {
  inset: 25%;
}

.radar-rings::after {
  inset: 50%;
}

/* HUD-style panel headers */
.panel-header-hud {
  position: relative;
  background: linear-gradient(90deg, rgba(0, 255, 136, 0.08) 0%, transparent 50%);
  border-left: 3px solid var(--hud-green);
  padding: 0.75rem 1rem;
}

.panel-header-hud::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 60px;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.03));
}

/* HUD corner brackets */
.hud-corners {
  position: relative;
}

.hud-corners::before,
.hud-corners::after,
.hud-corners > .corner-bl,
.hud-corners > .corner-br {
  position: absolute;
  width: 16px;
  height: 16px;
  border: 2px solid var(--hud-green);
  opacity: 0.4;
  pointer-events: none;
}

.hud-corners::before {
  content: '';
  top: 0;
  left: 0;
  border-right: none;
  border-bottom: none;
}

.hud-corners::after {
  content: '';
  top: 0;
  right: 0;
  border-left: none;
  border-bottom: none;
}

/* Status glow effects */
.status-glow-active {
  box-shadow: 0 0 12px rgba(59, 130, 246, 0.4);
  animation: glow-pulse-blue 2s ease-in-out infinite;
}

.status-glow-warning {
  box-shadow: 0 0 12px rgba(245, 158, 11, 0.4);
  animation: glow-pulse-amber 1.5s ease-in-out infinite;
}

.status-glow-success {
  box-shadow: 0 0 12px rgba(16, 185, 129, 0.4);
}

.status-glow-error {
  box-shadow: 0 0 12px rgba(239, 68, 68, 0.4);
}

@keyframes glow-pulse-blue {
  0%, 100% { box-shadow: 0 0 8px rgba(59, 130, 246, 0.3); }
  50% { box-shadow: 0 0 16px rgba(59, 130, 246, 0.5), 0 0 24px rgba(59, 130, 246, 0.2); }
}

@keyframes glow-pulse-amber {
  0%, 100% { box-shadow: 0 0 8px rgba(245, 158, 11, 0.3); }
  50% { box-shadow: 0 0 16px rgba(245, 158, 11, 0.5), 0 0 24px rgba(245, 158, 11, 0.2); }
}

/* Task card animations */
.task-card-enter {
  animation: slide-up 0.3s ease-out;
}

.task-card-complete {
  animation: scale-pulse 0.4s ease-out, border-flash-green 0.5s ease-out;
}

.task-card-failed {
  animation: shake 0.5s ease-in-out, border-flash-red 0.5s ease-out;
}

.task-card-loop {
  animation: warning-blink 1s linear infinite;
  border-color: var(--hud-amber) !important;
}

@keyframes slide-up {
  0% { opacity: 0; transform: translateY(10px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes scale-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
  20%, 40%, 60%, 80% { transform: translateX(2px); }
}

@keyframes border-flash-green {
  0% { border-color: rgba(16, 185, 129, 0.5); }
  50% { border-color: rgba(16, 185, 129, 1); }
  100% { border-color: rgba(16, 185, 129, 0.5); }
}

@keyframes border-flash-red {
  0% { border-color: rgba(239, 68, 68, 0.5); }
  50% { border-color: rgba(239, 68, 68, 1); }
  100% { border-color: rgba(239, 68, 68, 0.5); }
}

@keyframes warning-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* Agent card busy state */
.agent-card-busy {
  animation: glow-pulse-blue 2s ease-in-out infinite;
}

.agent-card-stuck {
  animation: glow-pulse-amber 1.5s ease-in-out infinite;
}

/* Timeline minimap styles */
.timeline-minimap {
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(ellipse at center, rgba(0, 255, 136, 0.02) 0%, transparent 70%),
    linear-gradient(180deg, #0a0e14 0%, #0d1219 100%);
}

.timeline-lane {
  position: relative;
  padding: 0.5rem 0;
}

.timeline-lane::before {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.2), transparent);
}

.timeline-task-dot {
  transition: all 0.5s ease-out;
}

.timeline-task-dot:hover {
  transform: scale(1.3);
  filter: brightness(1.2);
}

.timeline-connection {
  stroke-dasharray: 4 2;
  animation: dash-flow 1s linear infinite;
}

@keyframes dash-flow {
  0% { stroke-dashoffset: 6; }
  100% { stroke-dashoffset: 0; }
}

/* Animated counter styles */
.animated-counter {
  display: inline-block;
  font-variant-numeric: tabular-nums;
  transition: all 0.3s ease-out;
}

/* Budget progress ring */
.budget-ring {
  transform: rotate(-90deg);
}

.budget-ring-track {
  stroke: rgba(255, 255, 255, 0.1);
}

.budget-ring-progress {
  stroke-linecap: round;
  transition: stroke-dashoffset 0.5s ease-out;
}

/* Scrollbar enhancements */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(0, 255, 136, 0.3);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 255, 136, 0.5);
}
